<!DOCTYPE html>
<html class="writer-html5" lang="zh" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HPE DL360 Gen9安装NVIDIA Tesla P10运算卡 &mdash; Cloud Atlas: Discovery beta 文档</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=fd3f3429" />

  
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=8534f863"></script>
        <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../../search.html" />
    <link rel="copyright" title="版权所有" href="../../../../copyright.html" />
    <link rel="next" title="HPE DL360 Gen9服务器硬盘组件" href="hpe_dl360_gen9_hard_drive_kits.html" />
    <link rel="prev" title="HPE ProLiant DL360 Gen9服务器存储升级方案(构想)" href="dl360_nvme_storage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Cloud Atlas: Discovery
          </a>
              <div class="version">
                1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../studio/index.html">Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../infrastructure/index.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devops/index.html">DevOps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kvm/index.html">KVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ceph/index.html">Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../gluster/index.html">Gluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ovirt/index.html">oVirt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../openstack/index.html">OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kubernetes/index.html">Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../k8s_dev/index.html">Kubernetes Develop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../rancher/index.html">Rancher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../openshift/index.html">OpenShift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sql/index.html">SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sqlite/index.html">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mysql/index.html">MySQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pgsql/index.html">PostgreSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nosql/index.html">NoSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../network/index.html">Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../infra_service/index.html">Infra-Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../infra_search/index.html">Infra-Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../web/index.html">Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../info_service/index.html">Info-Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../big_data/index.html">Big Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../machine_learning/index.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../drone/index.html">Drone</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Linux</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../best_linux.html">最佳Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../admin/index.html">Linux系统管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../redhat_linux/index.html">RedHat Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arch_linux/index.html">Arch Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../asahi_linux/index.html">Asahi Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../gentoo_linux/index.html">Gentoo Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../lfs/index.html">LFS(Linux from scratch)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../blfs/index.html">BLFS(Beyond Linux from scratch)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../alfs/index.html">ALFS(Automated Linux from scratch)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pilfs/index.html">PiLFS(Automated Linux from scratch on the Raspberry Pi)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../yocto/index.html">Yocto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../debian/index.html">Debian</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ubuntu_linux/index.html">Ubuntu Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../suse_linux/index.html">SUSE Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kali_linux/index.html">Kali Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tails_linux/index.html">Tails Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../qubes_os/index.html">Qubes OS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../postmarketos/index.html">postmarketOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../container_os/index.html">容器化操作系统(Container OS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fedora_coreos/index.html">Fedora CoreOS容器操作系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../chromeos/index.html">ChromeOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../alpine_linux/index.html">Alpine Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../subgraph_os/index.html">Subgraph OS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kaios/index.html">KaiOS - 世界第三手机操作系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../compute/index.html">Linux计算</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../storage/index.html">Linux存储</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../network/index.html">Linux网络</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Linux服务器</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">服务器硬件</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../edac.html">EDAC 诊断系统硬件故障</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lm_sensor.html">lm_sensors(Linux监控传感器)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hwinfo.html">Linux系统硬件信息检测工具hwinfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lspci.html">lspci</a></li>
<li class="toctree-l4"><a class="reference internal" href="../check_server_temp.html">服务器温度检测</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lackpack.html">LackPack</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dell/index.html">Dell服务器</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">HPE服务器</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fanless/index.html">无风扇服务器</a></li>
<li class="toctree-l4"><a class="reference internal" href="../chipset/index.html">服务器主板芯片</a></li>
<li class="toctree-l4"><a class="reference internal" href="../storage/index.html">服务器存储</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../uefi/index.html">Linux UEFI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ipmi/index.html">IPMI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cockpit/index.html">Cockpit服务器统一管理平台</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../collectd/index.html">collectd - 系统信息采集服务</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../osquery/index.html">osquery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../security/index.html">Linux安全</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../desktop/index.html">Linux桌面</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../linux_tablet/index.html">Linux平板</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kernel/index.html">Kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../performance/index.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../distributed_system/index.html">Distributed System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../shell/index.html">Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../django/index.html">Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../javascript/index.html">JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nodejs/index.html">Node.js</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../clang/index.html">C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../golang/index.html">Go</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../swift/index.html">Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../rust/index.html">Rust</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ruby/index.html">Ruby</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../lua/index.html">Lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../arm/index.html">ARM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../raspberry_pi/index.html">Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../android/index.html">Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bsd/index.html">BSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../freebsd/index.html">FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../apple/index.html">Apple</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../windows/index.html">Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../real/index.html">Real</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../management/index.html">Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../life/index.html">Life</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../aboutme.html">关于作者</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../donate.html">捐赠</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../thanks.html">感谢</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../appendix/index.html">附录</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Cloud Atlas: Discovery</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Linux</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Linux服务器</a></li>
          <li class="breadcrumb-item"><a href="../index.html">服务器硬件</a></li>
          <li class="breadcrumb-item"><a href="index.html">HPE服务器</a></li>
      <li class="breadcrumb-item active">HPE DL360 Gen9安装NVIDIA Tesla P10运算卡</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/linux/server/hardware/hpe/dl360_tesla_p10.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="hpe-dl360-gen9nvidia-tesla-p10">
<span id="dl360-tesla-p10"></span><h1>HPE DL360 Gen9安装NVIDIA Tesla P10运算卡<a class="headerlink" href="#hpe-dl360-gen9nvidia-tesla-p10" title="Link to this heading"></a></h1>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>HPE DL360 Gen9是内部空间狭窄的 1U 机架服务器，对于安装扩展卡或者GPU卡非常不方便。因为现今的主流NVIDIA显卡都是耗能大户，需要极大的散热空间，所以体积巨大。常见的GPU卡都是双槽位大卡，根本无法安装到1U服务器内部。</p>
<p>我选择的NVIDIA Tesla P10是少数单槽位刀卡，但是依然长度惊人，达到了 <code class="docutils literal notranslate"><span class="pre">267mm</span></code> 长度，恰好是DL360 Gen9内部PCIe 3.0 Slot 1 和 Slot 3安装的极限尺寸。</p>
<p>实际上，由于GPU卡还需要外接电源，电源线需要占据空间，导致我不得不拆除机箱内部挡板，实际上这个步骤带来了一个意想不到的失误，差点搞坏了机箱和GPU运算卡...</p>
</div>
<p>我在购买Tesla P10之前，一直担心在 <a class="reference internal" href="hpe_dl360_gen9.html#hpe-dl360-gen9"><span class="std std-ref">HPE ProLiant DL360 Gen9服务器</span></a> 上安装空间不足。根据淘宝买家介绍的显卡安装案例 <code class="docutils literal notranslate"><span class="pre">Quadro</span> <span class="pre">K4200</span> <span class="pre">4GB</span> <span class="pre">图形显卡</span></code> 广告中声明 <code class="docutils literal notranslate"><span class="pre">支持显卡的最大尺寸：长*宽*高</span> <span class="pre">25*2*11</span> <span class="pre">cm（由于机器是1U尺寸机箱</span> <span class="pre">所以只能插刀卡）</span></code> 。按照 <a class="reference external" href="https://www.techpowerup.com/gpu-specs/tesla-p10.c3750">techpowerup GPU Database - NVIDIA Tesla P10</a> 资料， 长宽是 <code class="docutils literal notranslate"><span class="pre">267</span> <span class="pre">mm</span> <span class="pre">x</span> <span class="pre">97</span> <span class="pre">mm</span></code> 。</p>
<p>按照查询资料，似乎测量板卡尺寸各有不同，有些测量没有包括板卡的固定板，有的则包含，所以尺寸测量实际上是一个迷。我查询了很多Nvidia的GPU卡，发现大量的GPU卡公开资料都显示长度是 <code class="docutils literal notranslate"><span class="pre">267</span> <span class="pre">mm</span></code> ，也就是说，这个长度尺寸是标准尺寸。服务器和PC都是标准化设备，有可能还是可以安装(即使看上去只差一点点)。</p>
<p>我仔细测量了一下可能安装GPU卡的Slot1和Slot3安装空间，发现似乎可以放入长度 <code class="docutils literal notranslate"><span class="pre">267mm</span></code> 的卡，所以，抱着试一试的心理，还是冒险下单购买了 <a class="reference internal" href="../../../../machine_learning/hardware/nvidia_gpu/tesla_p10.html#tesla-p10"><span class="std std-ref">Nvidia Tesla P10 GPU运算卡</span></a> 。</p>
<section id="id1">
<h2>电源线<a class="headerlink" href="#id1" title="Link to this heading"></a></h2>
<p>Tesla P10买家是通过顺丰空运，第二天晚上就拿到了，安装到 DL360 Gen9的狭窄1U机箱，果然如我所推测， <span class="sphinxnotes-strike" style="text-decoration: line-through;">尺寸正好</span> 尺寸正好能够 &quot;严丝合缝&quot; 安装到 Slot1 或者 Slot3 的 PCIe 3.0 x16 插槽。</p>
<p>但是，遇到一个问题，Nvidia的GPU卡需要外接电源，而DL 360内部没有这个电源线。(后面我还要说因为这个外接电源带来的困扰和失误)</p>
<p><span class="sphinxnotes-strike" style="text-decoration: line-through;">问了卖家，这个电源线就是PC机的标准8-pin电源线</span> (实际不是)。</p>
<p>Tesla计算卡使用EPS供电接口，这个接口是服务器通用接口，通常在主板Raiser上提供。下图是 EPS 8pin 连接线接头:</p>
<figure class="align-default">
<img alt="../../../../_images/eps_8pin_power_connector.webp" src="../../../../_images/eps_8pin_power_connector.webp" />
</figure>
<p>在HP DL360 gen9的 <code class="docutils literal notranslate"><span class="pre">Primary</span> <span class="pre">PCIe</span> <span class="pre">3.0</span> <span class="pre">riser</span> <span class="pre">for</span> <span class="pre">PCIe</span> <span class="pre">slot</span> <span class="pre">1</span> <span class="pre">&amp;</span> <span class="pre">2</span></code> (对应CPU 1) 的电路板背面(靠近 slot2)有一个象牙色的电源出输出(8-pin)，可以安装EPS 8pin电源线(上图)输出电流给显卡使用。</p>
<p>下图是PCIe Slot 1 &amp; 2板上电源接口(部件翻转过来看):</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/dl360_gen9_pcie1.png"><img alt="../../../../_images/dl360_gen9_pcie1.png" src="../../../../_images/dl360_gen9_pcie1.png" style="width: 560.0px; height: 417.9px;" /></a>
</figure>
<p>需要注意EPS 8pin供电接口和普通家用的PCIe供电口不同(通常用于消费级显卡): 下图是PCIe 8pin接口和 EPS 8pin接口 差异比较</p>
<figure class="align-default">
<img alt="../../../../_images/pcie_eps_8pin_connector.webp" src="../../../../_images/pcie_eps_8pin_connector.webp" />
</figure>
<p>对于家用台式机安装数据中心Tesla计算卡，通常需要使用PCIe转EPS接口电源转接线，将两个PCIe电源作为输入来提供GPU计算卡外接电源:</p>
<figure class="align-default">
<img alt="../../../../_images/pcie2eps_connector.webp" src="../../../../_images/pcie2eps_connector.webp" />
</figure>
<p>我最初不知道EPS电源线规格(这也是最近和网友jinghuashang交流才注意到的)，好在万能淘宝上能够找到 <code class="docutils literal notranslate"><span class="pre">DELL</span> <span class="pre">R720</span> <span class="pre">双8针</span> <span class="pre">独立显卡</span> <span class="pre">供电线</span> <span class="pre">8针供电</span> <span class="pre">8P</span> <span class="pre">6+2</span></code> ，虽然卖家反复强调这根电源线只能用于Dell服务器，但是当时(一年前)苦于无法找到HP服务器的显卡供电线，我仔细对比观察了 <code class="docutils literal notranslate"><span class="pre">Dell</span> <span class="pre">R720</span> <span class="pre">双2针</span></code> 的接口，看起来是标准电源线接口，和我的HPE DL360 Gen9的 <code class="docutils literal notranslate"><span class="pre">Primary</span> <span class="pre">PCIe</span> <span class="pre">3.0</span> <span class="pre">riser</span> <span class="pre">for</span> <span class="pre">PCIe</span> <span class="pre">slot</span> <span class="pre">1</span> <span class="pre">&amp;</span> <span class="pre">2</span></code> 电源输出接口完全匹配。</p>
<p>考虑到PC服务器大多是标准通用部件，所以我推测Dell的电源线也可以用于HP服务器。价格不贵，10元，但是我也非常担心加电以后错误输电导致显卡或主板烧毁。毕竟，现在显卡实在太昂贵了...</p>
<p>收到显卡电源线之后，仔细检查了 <code class="docutils literal notranslate"><span class="pre">PCIe</span> <span class="pre">3.0</span> <span class="pre">riser</span></code> 的电源输出和 Tesla P10 电源输入，确认接口完全一致。连接以后，确实完全匹配。一咬牙，加电启动...还好，没有出现短路或者烧焦的现象出现。</p>
</section>
<section id="id2">
<h2>散热<a class="headerlink" href="#id2" title="Link to this heading"></a></h2>
<p>Tesla系列计算卡大多数是被动散热设计，原因是计算卡都是安装在数据中心服务器上，可以利用机架服务器机箱内的暴力风扇提供充足的散热气流(你可以看到计算卡的两头贯通有一排风洞)。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>我之前有过 <a class="reference internal" href="../fanless/think_server_fanless.html#think-server-fanless"><span class="std std-ref">无风扇服务器构思</span></a> ，但是和网友jinghuashang交流了解到如果不盖机箱盖，Tesla M40计算卡因为没有散热气流快速升温。所以对于GPU这种高能耗设备，可能较难实现 <a class="reference internal" href="../fanless/index.html#server-fanless"><span class="std std-ref">无风扇服务器</span></a> 。可能的解决方案也许就是改造为主动散热，或者降频(浪费硬件资源)</p>
</div>
<p><a class="reference external" href="https://zhuanlan.zhihu.com/p/536850498">Tesla M40P40 训练机组装与散热改造</a> 原文是在家用电脑上安装Tesla计算卡。因为家用电脑没有数据中心服务器那样的气流散热，所以需要改造计算卡的散热结构，通过加装主动散热风扇来解决。虽然我暂时用不上这个方案，但是也觉得很有借鉴: 采用 <code class="docutils literal notranslate"><span class="pre">影驰</span> <span class="pre">GTX</span> <span class="pre">1080Ti</span> <span class="pre">大将</span> <span class="pre">(GALAX</span> <span class="pre">GTX</span> <span class="pre">1080Ti</span> <span class="pre">EXOC)</span></code>
散热风扇(淘宝售价当前大约为66元)，改装效果如下:</p>
<figure class="align-default">
<img alt="../../../../_images/tesla_fans.webp" src="../../../../_images/tesla_fans.webp" />
</figure>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p><a class="reference external" href="https://zhuanlan.zhihu.com/p/536850498">Tesla M40P40 训练机组装与散热改造</a> 提到的几个散热风扇改装方式，可以在油管的 <a class="reference external" href="https://www.youtube.com/watch?v=WfKQP2sARGY">Craft Computing: How do you cool an nVidia Tesla GPU?</a> 看到视频博主的演示</p>
</div>
</section>
<section id="id4">
<h2>安装位置<a class="headerlink" href="#id4" title="Link to this heading"></a></h2>
<p>虽然 <a class="reference internal" href="hpe_dl360_gen9.html#hpe-dl360-gen9"><span class="std std-ref">HPE ProLiant DL360 Gen9服务器</span></a> 提供了2个 PCIe 3.0 x16 插槽，也就是 Slot1 和 Slot 3，看上去位置都能够满足安装 Tesla P10 这样尺寸的刀卡，但是，由于需要在有限的PCIe插槽上安装多个 <a class="reference internal" href="../../../storage/nvme/nvme.html#nvme"><span class="std std-ref">NVMe存储</span></a> 来实现分布式存储 <a class="reference internal" href="../../../../ceph/index.html#ceph"><span class="std std-ref">Ceph</span></a> ，必须通过 <a class="reference internal" href="pcie_bifurcation.html#pcie-bifurcation"><span class="std std-ref">PCIe bifurcation</span></a> 实现。在 <a class="reference internal" href="hpe_dl360_gen9.html#hpe-dl360-gen9"><span class="std std-ref">HPE ProLiant DL360 Gen9服务器</span></a> ，仅有 Slot 1 支持 <a class="reference internal" href="pcie_bifurcation.html#pcie-bifurcation"><span class="std std-ref">PCIe bifurcation</span></a> (虽然只能一分为二) ，所以限制了只能将GPU运算卡 Tesla P10安装到Slot 3。</p>
<p>经过安装尝试，确实能够将 NVIDIA Tesla P10 GPU运算卡安装到Slot3，见下图: 请注意，在服务器内部的前半边CPU和后半边扩展卡安装位的中间，有一个 <code class="docutils literal notranslate"><span class="pre">分隔挡板</span></code> ，埋下了 <code class="docutils literal notranslate"><span class="pre">我的失误</span></code> 的隐患:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/dl360_inside_pcie.png"><img alt="../../../../_images/dl360_inside_pcie.png" src="../../../../_images/dl360_inside_pcie.png" style="width: 436.09999999999997px; height: 448.0px;" /></a>
</figure>
<p>请注意，由于 <a class="reference internal" href="../../../../machine_learning/hardware/nvidia_gpu/tesla_p10.html#tesla-p10"><span class="std std-ref">Nvidia Tesla P10 GPU运算卡</span></a> 运算卡的长度达到 <code class="docutils literal notranslate"><span class="pre">267mm</span></code> ，边缘已经紧贴着 <code class="docutils literal notranslate"><span class="pre">分隔挡板</span></code> 。此时要为GPU卡插上 <code class="docutils literal notranslate"><span class="pre">电源线</span></code> ，就不得不拆除掉金属制作的 <code class="docutils literal notranslate"><span class="pre">分隔挡板</span></code> 。</p>
<p>事实上，我不知道这个分隔挡板的用途，其实服务器内部 <code class="docutils literal notranslate"><span class="pre">每个部件都是有其特有用途的</span></code> 。拆除了 <code class="docutils literal notranslate"><span class="pre">分隔挡板</span></code> 后，果然可以勉强把GPU运算卡的外接电源线插上了(需要一点空间)。一切看起来十分完美，我完成安装后合上机箱盖板，加电运行。</p>
<p>OK，一切正常，GPU运算卡在操作系统启动后能够正常识别...</p>
</section>
<section id="id5">
<h2>等等，机箱盖板...<a class="headerlink" href="#id5" title="Link to this heading"></a></h2>
<p>然而，第二天，当我想要替换安装NVMe存储时，突然发现一个 <code class="docutils literal notranslate"><span class="pre">糟糕</span></code> 的现实： <a class="reference internal" href="hpe_dl360_gen9.html#hpe-dl360-gen9"><span class="std std-ref">HPE ProLiant DL360 Gen9服务器</span></a> 服务器的机箱盖板无法打开了。无论我如何用力，甚至掰断了盖板上的开盖开关，动用了螺丝刀敲棒等手段...</p>
<p>整整折腾了2天，终于在不断尝试下(还试过用小钢锯锯掉机箱边缘的卡扣)，机箱上盖终于 <code class="docutils literal notranslate"><span class="pre">嘎吱</span></code> 一下被打开了...</p>
<p>检查之下，意外发现，Tesla GPU运算卡的边缘出现了一点扭曲变形，这是为何？</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/dl360_tesla_p10_bad.png"><img alt="../../../../_images/dl360_tesla_p10_bad.png" src="../../../../_images/dl360_tesla_p10_bad.png" style="width: 560.0px; height: 283.5px;" /></a>
</figure>
<p>原来，在 <a class="reference internal" href="hpe_dl360_gen9.html#hpe-dl360-gen9"><span class="std std-ref">HPE ProLiant DL360 Gen9服务器</span></a> 有一个 <code class="docutils literal notranslate"><span class="pre">L</span></code> 形的 <code class="docutils literal notranslate"><span class="pre">搭扣</span></code> ，这个搭扣就是在机箱盖板合上并推向合拢时勾在 <code class="docutils literal notranslate"><span class="pre">分隔挡板</span></code> 中间的孔洞中的。</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/dl360_cover.png"><img alt="../../../../_images/dl360_cover.png" src="../../../../_images/dl360_cover.png" style="width: 560.0px; height: 291.9px;" /></a>
</figure>
<p>由于我的Tesla P10卡长度过长，边缘紧贴着 <code class="docutils literal notranslate"><span class="pre">分隔挡板</span></code> ，所以这个搭扣在机箱盖合上时候，其实已经压到了 Tesla P10 运算卡的边缘上。所以，当机箱盖需要反向推移以便打开时，这个搭扣恰好抵在 Tesla P10 运算卡 上无法移动。这也就是为何机箱盖板再也打不开的原因。实际上，打开机盖的力气都通过 <code class="docutils literal notranslate"><span class="pre">搭扣</span> <span class="pre">=&gt;</span> <span class="pre">Tesla</span> <span class="pre">P10预算卡</span> <span class="pre">=&gt;</span> <span class="pre">PCIe</span> <span class="pre">Slot</span> <span class="pre">3</span> <span class="pre">=&gt;</span> <span class="pre">机箱主体</span></code> ，随后都卡死了。</p>
<p>还好，最后总算幸运打开，只是这番折腾，把 Tesla P10运算卡的散热盒边缘挤变形搞坏了。</p>
<p>既然找到了机盖无法打开的原因，接下来就是用老虎钳拆掉这个 <code class="docutils literal notranslate"><span class="pre">罪魁祸首</span></code> 搭扣:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/dl360_cover_1.png"><img alt="../../../../_images/dl360_cover_1.png" src="../../../../_images/dl360_cover_1.png" style="width: 560.0px; height: 262.5px;" /></a>
</figure>
</section>
<section id="gpularge-bar">
<h2>GPU需要服务器large bar内存<a class="headerlink" href="#gpularge-bar" title="Link to this heading"></a></h2>
<p>硬件安装完成后，首次启动会发现BIOS报错，显示GPU请求太多内存超出限制。这里需要 <a class="reference internal" href="dl360_gen9_large_bar_memory.html#dl360-gen9-large-bar-memory"><span class="std std-ref">HP DL360 Gen9 Large Bar Memory(Tesla P10)</span></a> 配置完成才能正常识别GPU运算卡。之后，我们才能开始进一步 <a class="reference internal" href="../../../../kvm/vgpu/index.html#vgpu"><span class="std std-ref">NVIDIA Virtual GPU (vGPU)</span></a> 以及 <a class="reference internal" href="../../../../kvm/iommu/index.html#iommu"><span class="std std-ref">IOMMU</span></a> 等虚拟化配置。</p>
</section>
<section id="id6">
<h2>参考<a class="headerlink" href="#id6" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://zhuanlan.zhihu.com/p/536850498">Tesla M40P40 训练机组装与散热改造</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="dl360_nvme_storage.html" class="btn btn-neutral float-left" title="HPE ProLiant DL360 Gen9服务器存储升级方案(构想)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="hpe_dl360_gen9_hard_drive_kits.html" class="btn btn-neutral float-right" title="HPE DL360 Gen9服务器硬盘组件" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../../copyright.html">版权所有</a> 2018 - now, Huatai Huang。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
  
    <!-- your html code here -->
    <br>
    <p><a href="https://github.com/huataihuang/cloud-atlas/issues">留言和讨论</a>|<a href="https://github.com/huataihuang/cloud-atlas/blob/master/source/donate.rst">请我喝一杯咖啡 👈</a></p>
    <br>
    <p>网站采用 <a href="https://utteranc.es/">utterances</a> 评论系统，所有评论存储在<a href="https://github.com/huataihuang/cloud-atlas/issues">GitHub issues</a> 中，如果你看不到下方的评论框，那么可能需要<a href="https://cloud-atlas.readthedocs.io/zh-cn/latest/linux/security/vpn/index.html">自备梯子</a> 👈</p>
    <div class="articleComments">
        <comments>
  <script src="https://utteranc.es/client.js"
    repo="huataihuang/cloud-atlas"
    issue-term="pathname"
    theme="github-light"
    crossorigin="anonymous"
    async>
  </script>
</comments>
    </div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>