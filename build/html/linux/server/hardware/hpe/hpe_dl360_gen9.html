<!DOCTYPE html>
<html class="writer-html5" lang="zh" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HPE ProLiant DL360 Gen9服务器 &mdash; Cloud Atlas: Discovery beta 文档</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=fd3f3429" />

  
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=8534f863"></script>
        <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../../search.html" />
    <link rel="copyright" title="版权所有" href="../../../../copyright.html" />
    <link rel="next" title="HPE ProLiant DL380 Gen9服务器" href="hpe_dl380_gen9.html" />
    <link rel="prev" title="HPE服务器" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Cloud Atlas: Discovery
          </a>
              <div class="version">
                1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../studio/index.html">Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../infrastructure/index.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devops/index.html">DevOps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kvm/index.html">KVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ceph/index.html">Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../gluster/index.html">Gluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ovirt/index.html">oVirt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../openstack/index.html">OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kubernetes/index.html">Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../k8s_dev/index.html">Kubernetes Develop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../rancher/index.html">Rancher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../openshift/index.html">OpenShift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sql/index.html">SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../sqlite/index.html">SQLite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mysql/index.html">MySQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pgsql/index.html">PostgreSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nosql/index.html">NoSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../network/index.html">Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../infra_service/index.html">Infra-Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../infra_search/index.html">Infra-Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../web/index.html">Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../info_service/index.html">Info-Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../big_data/index.html">Big Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../machine_learning/index.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../drone/index.html">Drone</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Linux</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../best_linux.html">最佳Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../admin/index.html">Linux系统管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../redhat_linux/index.html">RedHat Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arch_linux/index.html">Arch Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../asahi_linux/index.html">Asahi Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../gentoo_linux/index.html">Gentoo Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../lfs/index.html">LFS(Linux from scratch)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../blfs/index.html">BLFS(Beyond Linux from scratch)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../alfs/index.html">ALFS(Automated Linux from scratch)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pilfs/index.html">PiLFS(Automated Linux from scratch on the Raspberry Pi)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../yocto/index.html">Yocto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../debian/index.html">Debian</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ubuntu_linux/index.html">Ubuntu Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../suse_linux/index.html">SUSE Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kali_linux/index.html">Kali Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tails_linux/index.html">Tails Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../qubes_os/index.html">Qubes OS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../postmarketos/index.html">postmarketOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../container_os/index.html">容器化操作系统(Container OS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fedora_coreos/index.html">Fedora CoreOS容器操作系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../chromeos/index.html">ChromeOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../alpine_linux/index.html">Alpine Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../subgraph_os/index.html">Subgraph OS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kaios/index.html">KaiOS - 世界第三手机操作系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../compute/index.html">Linux计算</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../storage/index.html">Linux存储</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../network/index.html">Linux网络</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Linux服务器</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">服务器硬件</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../edac.html">EDAC 诊断系统硬件故障</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lm_sensor.html">lm_sensors(Linux监控传感器)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hwinfo.html">Linux系统硬件信息检测工具hwinfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lspci.html">lspci</a></li>
<li class="toctree-l4"><a class="reference internal" href="../check_server_temp.html">服务器温度检测</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lackpack.html">LackPack</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dell/index.html">Dell服务器</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">HPE服务器</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fanless/index.html">无风扇服务器</a></li>
<li class="toctree-l4"><a class="reference internal" href="../chipset/index.html">服务器主板芯片</a></li>
<li class="toctree-l4"><a class="reference internal" href="../storage/index.html">服务器存储</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../uefi/index.html">Linux UEFI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ipmi/index.html">IPMI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cockpit/index.html">Cockpit服务器统一管理平台</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../collectd/index.html">collectd - 系统信息采集服务</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../osquery/index.html">osquery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../security/index.html">Linux安全</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../desktop/index.html">Linux桌面</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../linux_tablet/index.html">Linux平板</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kernel/index.html">Kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../performance/index.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../distributed_system/index.html">Distributed System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../shell/index.html">Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../django/index.html">Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../javascript/index.html">JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nodejs/index.html">Node.js</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../clang/index.html">C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../golang/index.html">Go</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../swift/index.html">Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../rust/index.html">Rust</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ruby/index.html">Ruby</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../lua/index.html">Lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../arm/index.html">ARM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../raspberry_pi/index.html">Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../android/index.html">Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bsd/index.html">BSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../freebsd/index.html">FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../apple/index.html">Apple</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../windows/index.html">Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../real/index.html">Real</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../management/index.html">Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../life/index.html">Life</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../aboutme.html">关于作者</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../donate.html">捐赠</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../thanks.html">感谢</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../appendix/index.html">附录</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Cloud Atlas: Discovery</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Linux</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Linux服务器</a></li>
          <li class="breadcrumb-item"><a href="../index.html">服务器硬件</a></li>
          <li class="breadcrumb-item"><a href="index.html">HPE服务器</a></li>
      <li class="breadcrumb-item active">HPE ProLiant DL360 Gen9服务器</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/linux/server/hardware/hpe/hpe_dl360_gen9.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="hpe-proliant-dl360-gen9">
<span id="hpe-dl360-gen9"></span><h1>HPE ProLiant DL360 Gen9服务器<a class="headerlink" href="#hpe-proliant-dl360-gen9" title="Link to this heading"></a></h1>
<section id="dl360">
<h2>DL360服务器外观<a class="headerlink" href="#dl360" title="Link to this heading"></a></h2>
<section id="id1">
<h3>前面板<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>HPE ProLiant DL360 Gen9服务器是通用型1U机架式服务器，提供了不错的计算能力和高密度存储(目前SSD存储技术已经向微型化发展，所以即使1U服务也能提供非常高的存储容量)。</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/hpe_dl360_gen9_front.png"><img alt="../../../../_images/hpe_dl360_gen9_front.png" src="../../../../_images/hpe_dl360_gen9_front.png" style="width: 700.8000000000001px; height: 355.20000000000005px;" /></a>
</figure>
<p>标准配置是采用 8 个SFF，也可以订购不同 <a class="reference internal" href="../storage/storage_spec.html#storage-spec"><span class="std std-ref">存储设备规格</span></a> 组合，其中比较有特色的是:</p>
<ul class="simple">
<li><p>4 SAS/SATA (Drive 1-4)+6 NVMe (Drive 5-10)</p></li>
</ul>
<p>我觉得可以配置成:</p>
<ul class="simple">
<li><p>Drive 1-2 采用常规SATA SSD (企业级SAS SSD价格惊人，个人无法承受)</p>
<ul>
<li><p>方法一: 双盘组成RAID1，构建操作系统，确保本机服务器始终可用</p></li>
<li><p>方法二: 两个SSD磁盘分别用于文件系统不同职责，例如数据和log分离，加速ZFS/Btrfs的性能</p></li>
</ul>
</li>
<li><p>Drive 3-5 采用大容量 HDD ，构建基于 <a class="reference internal" href="../../../../gluster/index.html#gluster"><span class="std std-ref">Gluster</span></a> 的镜像近线存储，提供NAS文件存储功能</p>
<ul>
<li><p>采用大容量的机械磁盘可以降低存储成本，并且对于连续写入的大文件，机械磁盘性能在可接受范围</p></li>
<li><p>注意 <a class="reference internal" href="../storage/hdd_pmr_cmr_smr.html#hdd-pmr-cmr-smr"><span class="std std-ref">机械硬盘(HDD)磁头PMR、CMR、SMR的区别和选择</span></a> ，应该购买CMR结构的HDD，并尽可能选择CMR大容量磁盘(小规格CMR HDD已经和SSD价格相近毫无优势)</p></li>
</ul>
</li>
<li><p>(取消这条建议，原因见后)Drive 6-8 采用 SATA SSD，通过虚拟化构建 <a class="reference internal" href="../../../../ceph/index.html#ceph"><span class="std std-ref">Ceph</span></a> 存储集群，提供整个虚拟化 <a class="reference internal" href="../../../../openstack/index.html#openstack"><span class="std std-ref">OpenStack</span></a> 分布式存储，实现云计算底层存储</p></li>
</ul>
<p>企业级服务器的部件价格是家用计算机部件的2倍价格，例如同样1T容量的NVMe家用型只需要600元，但是U.2接口的NVMe SFF存储(2.5&quot; NVMe SSD)则售价在1200~1800元，对于组件模拟分布式存储，还是推荐采用家用NVMe设备(转接卡+M.2 NVMe)。此外，根据资料，要在 Drive 5-10 使用 U.2 接口的NVMe SSD需要满足:</p>
<blockquote>
<div><ul class="simple">
<li><p>使用专用背板(价格非常昂贵)</p></li>
<li><p>内部改造连线，从PCIe接口引出联线</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>实际上我最终没有采购CMR HDD机械磁盘，因为我发现目前由于磁记录技术停滞发展，已经没有超过2T规格的 <code class="docutils literal notranslate"><span class="pre">2.5&quot;</span></code> CMR HDD了。小规格HDD售价和SSD相差无几，性能又大为落后，所以如果要实现高性能分布式集群，还是采用 NVMe SSD实现更佳。</p>
<p>目前我先临时采用旧有的500GB 笔记本HDD磁盘来模拟实验，并且采购 PCIe 3.0 slot 转接 <span class="sphinxnotes-strike" style="text-decoration: line-through;">4个</span> 3个NVMe SSD磁盘(原因是 DL360 Gen9 <a class="reference internal" href="pcie_bifurcation.html#pcie-bifurcation"><span class="std std-ref">PCIe bifurcation</span></a> 只能在slot1上设置，并且只支持分成2个 x8，导致加上 slot 2，我只能安装3个NVMe - <a class="reference internal" href="../../../storage/nvme/samsung_pm9a1.html#samsung-pm9a1"><span class="std std-ref">三星PM9A1 NVMe存储</span></a> )，来实现高性能 <a class="reference internal" href="../../../../ceph/index.html#ceph"><span class="std std-ref">Ceph</span></a> 集群:</p>
<ul class="simple">
<li><p>PCIe 3.0 x16 (slot1) 转接 <span class="sphinxnotes-strike" style="text-decoration: line-through;">4个</span> 2个 NVMe SSD磁盘(需要主板支持 <a class="reference internal" href="pcie_bifurcation.html#pcie-bifurcation"><span class="std std-ref">PCIe bifurcation</span></a> )</p></li>
<li><p>需要升级 <a class="reference internal" href="#hpe-dl360-gen9"><span class="std std-ref">HPE ProLiant DL360 Gen9服务器</span></a> BIOS 才能支持 <code class="docutils literal notranslate"><span class="pre">PCIe</span> <span class="pre">Bifurcation</span> <span class="pre">Options</span></code></p></li>
</ul>
</div>
</section>
<section id="id2">
<h3>后面版<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/hpe_dl360_gen9_back.png"><img alt="../../../../_images/hpe_dl360_gen9_back.png" src="../../../../_images/hpe_dl360_gen9_back.png" style="width: 689.6px; height: 371.20000000000005px;" /></a>
</figure>
<p>值得关注点:</p>
<ul class="simple">
<li><p>板载集成4端口千兆网卡，可以组建network bonding实现高速网络交换，或者可以尝试实践一个以Linux为基础的高速交换网络，学习SDN技术</p></li>
<li><p>可选的FlexibleLOM bay可以安装附加的4口网卡，扩展性更强的交换网络 (建议采购，因为主板自带的Broadcom NetXtreme BCM5719不支持 <a class="reference internal" href="../../../../kvm/iommu/sr-iov/index.html#sr-iov"><span class="std std-ref">Sigle Root I/O Virtualization(SR-IOV)</span></a> ，而配套的 FlexibleLOM 4口网卡是 Intel I350千兆网卡，可以完美支持Intel主推的 <a class="reference internal" href="../../../../kvm/iommu/sr-iov/index.html#sr-iov"><span class="std std-ref">Sigle Root I/O Virtualization(SR-IOV)</span></a> 技术，用于部署更多采用IOMMU/SR-IOV的虚拟机)</p></li>
<li><p>电源可能需要购买高功率，因为如果使用高性能CPU没有大功率电源支持会导致不稳定 - 我最后订购了800w规格，目前使用下来比较稳定，后续观察GPU运行情况再补充</p></li>
</ul>
</section>
<section id="id3">
<h3>内部<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/hpe_dl360_gen9_inside.png"><img alt="../../../../_images/hpe_dl360_gen9_inside.png" src="../../../../_images/hpe_dl360_gen9_inside.png" style="width: 733.6px; height: 668.0px;" /></a>
</figure>
<p>重点:</p>
<ul class="simple">
<li><p>主板内部提供了Micro-SD卡接口，功能待查</p></li>
<li><p>支持2种存储卡: HPE Flexible Smart Array 和 Smart HBA，型号是 H240ar 和 P440ar</p></li>
<li><p>PCIe 规格是 3.0，需要注意插槽1和2和处理器1关联，插槽3和处理器2关联</p></li>
<li><p>提供了2个主板SATA控制器插口</p></li>
<li><p>主板内建4个千兆网口，使用的是 Broadcom BCM5719 网卡芯片</p></li>
<li><p>可选4口千兆 <code class="docutils literal notranslate"><span class="pre">FlexibleLOM</span> <span class="pre">Bay</span></code> 网卡(有多种规格，千兆、万兆和25Gb各种)，常见的是Intel 4口千兆网卡 <code class="docutils literal notranslate"><span class="pre">HP</span> <span class="pre">Ethernet</span> <span class="pre">1Gb</span> <span class="pre">4-port</span> <span class="pre">366FLR</span> <span class="pre">Adapter</span></code> (部件编号 <code class="docutils literal notranslate"><span class="pre">665240-B21</span></code>) (从淘宝购买二手服务器时，这块可选网卡被拆除了，需要单独购买 220 元)</p></li>
</ul>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/hpe_dl360_gen9_mainboard.png"><img alt="../../../../_images/hpe_dl360_gen9_mainboard.png" src="../../../../_images/hpe_dl360_gen9_mainboard.png" style="width: 633.6px; height: 643.5px;" /></a>
</figure>
<table class="docutils align-default" id="id14">
<caption><span class="caption-text">HPE ProLiant DL360 Gen9 主板组件</span><a class="headerlink" href="#id14" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>编号</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>FlexibleLOM connector</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Primary (processor 1) PCI riser connector</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>NMI jumper</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>System maintenance switch</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Front VGA/USB 2.0 connector</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>x4 SATA port 1</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>x4 SATA port 2</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>Backplane presence detect connector</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>Optical/SATA port 5</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>SATA port 4</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>Front power/USB 3.0 connector</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>HPE Smart Storage Battery connector</p></td>
</tr>
<tr class="row-even"><td><p>13</p></td>
<td><p>Optional Location Discovery Services connector</p></td>
</tr>
<tr class="row-odd"><td><p>14</p></td>
<td><p>Drive backplane power connector</p></td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td><p>microSD card slot</p></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p>Dual internal USB 3.0 connector</p></td>
</tr>
<tr class="row-even"><td><p>17</p></td>
<td><p>Smart Array/HBA connector</p></td>
</tr>
<tr class="row-odd"><td><p>18</p></td>
<td><p>Secondary (processor 2) PCI riser connector</p></td>
</tr>
<tr class="row-even"><td><p>19</p></td>
<td><p>System battery</p></td>
</tr>
<tr class="row-odd"><td><p>20</p></td>
<td><p>TPM connector</p></td>
</tr>
<tr class="row-even"><td><p>21</p></td>
<td><p>Optional serial port connector</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>我在 <a class="reference internal" href="../edac.html#edac"><span class="std std-ref">EDAC 诊断系统硬件故障</span></a> 实践中了解到，内存插槽和硬件检测故障定位有密切关系，需要注意 <a class="reference internal" href="dl360_config_mem.html#hpe-dl360-gen9-memory"><span class="std std-ref">HP DL360 Gen9 内存安装</span></a> ，并且确保 <code class="docutils literal notranslate"><span class="pre">DIMM</span> <span class="pre">labels</span></code> 数据配置文件和实际服务器DIMM插槽正确对应，这样才能帮助运维人员快速定位故障内存</p>
</div>
</section>
<section id="pcie">
<h3>PCIe<a class="headerlink" href="#pcie" title="Link to this heading"></a></h3>
<p><a class="reference internal" href="../chipset/pcie.html#pcie"><span class="std std-ref">PCIe</span></a> 通道是和CPU连接的，主机受限于处理器并不能添加过多的PCIe插槽(添加过多也只是分享cpu通道，反而无法获得最高速度)。不过，对于 <a class="reference internal" href="../chipset/intel_c610.html#intel-c610"><span class="std std-ref">Intel C610系列主板芯片</span></a> 也就是X99平台，支持2个志强处理器，所以可以通过将不同的PCIe分别连接到2个处理器获得全速运行性能。需要注意，在 <a class="reference external" href="https://support.hpe.com/hpesc/public/docDisplay?docLocale=en_US&amp;docId=c04346229">HPE ProLiant DL360 Gen9 Server QuickSpecs</a> 明确指出主机所支持到3个PCIe slot，其中 PCIe slot 1-2 连接CPU 1，而 PCIe slot 3 连接到CPU 2 :</p>
<ul class="simple">
<li><p>由于DL 360是一个1U的紧凑型机架服务器，所以需要使用 <code class="docutils literal notranslate"><span class="pre">PCIe</span> <span class="pre">3.0</span> <span class="pre">riser</span> <span class="pre">for</span> <span class="pre">PCIe</span> <span class="pre">slot</span> <span class="pre">X</span></code> 也就是PCIe扩展板，将插槽由垂直转为水平。需要注意的是，DL 360默认配置只提供了 <code class="docutils literal notranslate"><span class="pre">Primary</span> <span class="pre">PCIe</span> <span class="pre">3.0</span> <span class="pre">riser</span> <span class="pre">for</span> <span class="pre">PCIe</span> <span class="pre">slot</span> <span class="pre">1</span> <span class="pre">&amp;</span> <span class="pre">2</span></code> (对应CPU 1) ，而第二块PCIe扩展板 <code class="docutils literal notranslate"><span class="pre">Secondary</span> <span class="pre">PCIe</span> <span class="pre">3.0</span> <span class="pre">riser</span> <span class="pre">for</span> <span class="pre">PCIe</span> <span class="pre">slot</span> <span class="pre">3</span> <span class="pre">(requires</span> <span class="pre">CPU</span> <span class="pre">2)</span></code> 需要另外购买</p></li>
<li><p>只有购买了 <code class="docutils literal notranslate"><span class="pre">Secondary</span> <span class="pre">PCIe</span> <span class="pre">3.0</span> <span class="pre">riser</span> <span class="pre">for</span> <span class="pre">PCIe</span> <span class="pre">slot</span> <span class="pre">3</span> <span class="pre">(requires</span> <span class="pre">CPU</span> <span class="pre">2)</span></code> 才能充分发挥DL 360的PCIe性能，也就是把PCIe数据访问分担到两个CPU上，性能最佳</p></li>
<li><p>我推测如果购买并安装第二块PCIe扩展板，实际上DL360可以安装2块 PCIe 3.0 x16 的显卡，理论上可以组建一个性能更强 <a class="reference internal" href="../../../../machine_learning/hardware/dl_hardware.html#dl-hardware"><span class="std std-ref">深度学习硬件指南</span></a> 平台 (不过，因为PCIe插槽有限，我最终用slot1+slot2安装 <a class="reference internal" href="../../../storage/nvme/nvme.html#nvme"><span class="std std-ref">NVMe存储</span></a> ，slot3安装 <a class="reference internal" href="../../../../machine_learning/hardware/nvidia_gpu/tesla_p10.html#tesla-p10"><span class="std std-ref">Nvidia Tesla P10 GPU运算卡</span></a> 。很可惜，扩展性不足，后续有机会要采购扩展性更好的服务器，组件GPU集群 )</p></li>
<li><p>根据 <a class="reference external" href="https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-c04444424">HPE ProLiant DL360 Gen9 Server - Option Parts</a> 可以查询到上述第二块PCIe riser扩展板部件:</p>
<ul>
<li><p>HP DL360 Gen9 Low Profile PCIe Slot CPU2 Kit 部件编号是 <code class="docutils literal notranslate"><span class="pre">764642-B21</span></code> 在淘宝上能够找到价格为400元 (已买，已成功转接安装 <a class="reference internal" href="../../../../machine_learning/hardware/nvidia_gpu/tesla_p10.html#tesla-p10"><span class="std std-ref">Nvidia Tesla P10 GPU运算卡</span></a> )</p></li>
<li><p>HP DL360 Gen9 Full Height PCIe Slot CPU2 Kit 部件编号是 <code class="docutils literal notranslate"><span class="pre">764644-B21</span></code> (淘宝上没有，ebay上售价极高，放弃)</p></li>
</ul>
</li>
</ul>
</section>
<section id="flexiblelom-adapter">
<h3>FlexibleLOM Adapter<a class="headerlink" href="#flexiblelom-adapter" title="Link to this heading"></a></h3>
<p>可选的 <code class="docutils literal notranslate"><span class="pre">FlexibleLOM</span> <span class="pre">Bay</span></code> 网卡有多种规格，千兆、万兆甚至25Gb。常见的是:</p>
<ul class="simple">
<li><p>Intel 4口千兆网卡 <code class="docutils literal notranslate"><span class="pre">HP</span> <span class="pre">Ethernet</span> <span class="pre">1Gb</span> <span class="pre">4-port</span> <span class="pre">366FLR</span> <span class="pre">Adapter</span></code> (部件编号 <code class="docutils literal notranslate"><span class="pre">665240-B21</span></code> )</p></li>
<li><p>Intel 82599控制芯片 <code class="docutils literal notranslate"><span class="pre">HPE</span> <span class="pre">Ethernet</span> <span class="pre">10Gb</span> <span class="pre">2-port</span> <span class="pre">560SFP+</span> <span class="pre">Adapter</span></code> (部件编号 <code class="docutils literal notranslate"><span class="pre">665249-B21</span></code> )</p></li>
</ul>
<p>不过我从淘宝购买二手DL360服务器，这块可选网卡被拆除了，需要单独购买 220 元。虽然有些小贵，但是考虑到不用占用服务器宝贵的PCIe插槽，并且是Intel网卡芯片，可以结合Intel开发的驱动以及DPDK技术加速网络虚拟化性能，我准备用来构建Linux交换设备，来连接我的多个 <a class="reference internal" href="../../../../raspberry_pi/pi_cluster/index.html#pi-cluster"><span class="std std-ref">Raspberry Pi Cluster</span></a> ，实现混合架构 <a class="reference internal" href="../../../../kubernetes/index.html#kubernetes"><span class="std std-ref">Kubernetes</span></a> 。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>部件选择以 <a class="reference external" href="https://support.hpe.com/hpesc/public/docDisplay?docLocale=en_US&amp;docId=c04346229">HPE ProLiant DL360 Gen9 Server QuickSpecs</a> 为准。HPE服务器网络配件 <a class="reference external" href="https://www.hpe.com/psnow/doc/c04111479">HPE Ethernet 10Gb 2-port 530FLR-SFP+ Adapter (手册)</a> 采用 QLogic 控制芯片，适配列表是 (DL360p) Gen8 ，没有包含在 (DL360) Gen9 兼容列表中。</p>
</div>
</section>
<section id="id5">
<h3>内部改造<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>这个内部改造暂时放弃，我计划购买二手Cisco交换机来实践企业网络组网</p>
</div>
<p>考虑到DL360服务器内部有一些尚未利用到空间，我准备将 <a class="reference internal" href="../../../../raspberry_pi/hardware/pi_4.html#pi-4"><span class="std std-ref">树莓派Raspberry Pi 4</span></a> 和 <a class="reference internal" href="../../../../machine_learning/jetson/jetson_nano.html#jetson-nano"><span class="std std-ref">Jetson Nano</span></a> 安装到DL 360内部，结合上述Intel 4口千兆网卡所构建的Linux交换机，组建成一台混合架构模拟集群的服务器。</p>
</section>
</section>
<section id="id6">
<h2>配置<a class="headerlink" href="#id6" title="Link to this heading"></a></h2>
<p>HPE ProLiant DL360 Gen9 服务器综合配置介于 <a class="reference internal" href="../dell/dell_r630.html#dell-r630"><span class="std std-ref">Dell R630服务器</span></a> 和 <a class="reference internal" href="../dell/dell_r640.html#dell-r640"><span class="std std-ref">Dell PowerEdge R640服务器</span></a> 之间:</p>
<ul class="simple">
<li><p>主板芯片和 <a class="reference internal" href="../dell/dell_r630.html#dell-r630"><span class="std std-ref">Dell R630服务器</span></a> 相同，采用 <a class="reference internal" href="../chipset/intel_c610.html#intel-c610"><span class="std std-ref">Intel C610系列主板芯片</span></a> 系列</p></li>
<li><p>CPU支持和 <a class="reference internal" href="../dell/dell_r630.html#dell-r630"><span class="std std-ref">Dell R630服务器</span></a> 相同，支持 <a class="reference internal" href="../../../../kernel/cpu/intel/xeon_e5/xeon_e5-2600_v3.html#xeon-e5-2600-v3"><span class="std std-ref">Intel Xeon E5-2600 v3系列处理器</span></a> 和 <a class="reference internal" href="../../../../kernel/cpu/intel/xeon_e5/xeon_e5-2600_v4.html#xeon-e5-2600-v4"><span class="std std-ref">Intel Xeon E5-2600 v4处理器</span></a> ，这款服务器支持的CPU型号较多(比DL160):</p></li>
</ul>
<table class="docutils align-default" id="id15">
<caption><span class="caption-text">HPE ProLiant DL360 Gen9 支持E5-2600 v3/v4处理器</span><a class="headerlink" href="#id15" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 10.0%" />
<col style="width: 10.0%" />
<col style="width: 10.0%" />
<col style="width: 10.0%" />
<col style="width: 10.0%" />
<col style="width: 10.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Model</p></th>
<th class="head"><p>价格</p></th>
<th class="head"><p>主频</p></th>
<th class="head"><p>Cores</p></th>
<th class="head"><p>L3 Cache</p></th>
<th class="head"><p>Power</p></th>
<th class="head"><p>QPI</p></th>
<th class="head"><p>DDR4 Hz</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E5-2699v3</p></td>
<td><p>158</p></td>
<td><p>2.3</p></td>
<td><p>18</p></td>
<td><p>45MB</p></td>
<td><p>145 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2698v3</p></td>
<td><p>85</p></td>
<td><p>2.3</p></td>
<td><p>16</p></td>
<td><p>40MB</p></td>
<td><p>135 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-even"><td><p>E5-2697v3</p></td>
<td></td>
<td></td>
<td><p>14</p></td>
<td><p>35MB</p></td>
<td><p>145 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2696v3</p></td>
<td><p>235</p></td>
<td><p>2.3</p></td>
<td><p>18</p></td>
<td><p>45MB</p></td>
<td><p>145 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-even"><td><p>E5-2695v3</p></td>
<td></td>
<td></td>
<td><p>14</p></td>
<td><p>35MB</p></td>
<td><p>120 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2690v3</p></td>
<td></td>
<td></td>
<td><p>12</p></td>
<td><p>30MB</p></td>
<td><p>135 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-even"><td><p>E5-2687Wv3</p></td>
<td></td>
<td></td>
<td><p>10</p></td>
<td><p>25MB</p></td>
<td><p>160 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2683v3</p></td>
<td></td>
<td></td>
<td><p>14</p></td>
<td><p>35MB</p></td>
<td><p>120 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-even"><td><p>E5-2680v3</p></td>
<td></td>
<td></td>
<td><p>12</p></td>
<td><p>30MB</p></td>
<td><p>120 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2676v3</p></td>
<td><p>55</p></td>
<td><p>2.4</p></td>
<td><p>12</p></td>
<td><p>30MB</p></td>
<td><p>120 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-even"><td><p>E5-2673v3</p></td>
<td><p>53</p></td>
<td><p>2.4</p></td>
<td><p>12</p></td>
<td><p>30MB</p></td>
<td><p>110 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">E5-2670v3</span></code></p></td>
<td></td>
<td><p>2.3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">12</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30MB</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">120</span> <span class="pre">W</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">9.6</span> <span class="pre">GT/s</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2133</span></code></p></td>
</tr>
<tr class="row-even"><td><p>E5-2667v3</p></td>
<td></td>
<td></td>
<td><p>8</p></td>
<td><p>25MB</p></td>
<td><p>135 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2666v3</p></td>
<td><p>48</p></td>
<td><p>2.9</p></td>
<td><p>10</p></td>
<td><p>25MB</p></td>
<td><p>135 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-even"><td><p>E5-2660v3</p></td>
<td></td>
<td></td>
<td><p>10</p></td>
<td><p>25MB</p></td>
<td><p>105 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2650v3</p></td>
<td></td>
<td></td>
<td><p>10</p></td>
<td><p>25MB</p></td>
<td><p>105 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-even"><td><p>E5-2650Lv3</p></td>
<td></td>
<td></td>
<td><p>12</p></td>
<td><p>25MB</p></td>
<td><p>65 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2643v3</p></td>
<td></td>
<td></td>
<td><p>6</p></td>
<td><p>20MB</p></td>
<td><p>135 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-even"><td><p>E5-2640v3</p></td>
<td></td>
<td></td>
<td><p>8</p></td>
<td><p>20MB</p></td>
<td><p>90 W</p></td>
<td><p>8.0 GT/s</p></td>
<td><p>1866</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2637v3</p></td>
<td></td>
<td></td>
<td><p>4</p></td>
<td><p>15MB</p></td>
<td><p>135 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-even"><td><p>E5-2630v3</p></td>
<td></td>
<td></td>
<td><p>8</p></td>
<td><p>20MB</p></td>
<td><p>85 W</p></td>
<td><p>8.0 GT/s</p></td>
<td><p>1866</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2630Lv3</p></td>
<td></td>
<td></td>
<td><p>8</p></td>
<td><p>25MB</p></td>
<td><p>55 W</p></td>
<td><p>8.0 GT/s</p></td>
<td><p>1866</p></td>
</tr>
<tr class="row-even"><td><p>E5-2623v3</p></td>
<td></td>
<td></td>
<td><p>4</p></td>
<td><p>10MB</p></td>
<td><p>105 W</p></td>
<td><p>8.0 GT/s</p></td>
<td><p>1866</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2620v3</p></td>
<td></td>
<td></td>
<td><p>6</p></td>
<td><p>15MB</p></td>
<td><p>85 W</p></td>
<td><p>8.0 GT/s</p></td>
<td><p>1866</p></td>
</tr>
<tr class="row-even"><td><p>E5-2609v3</p></td>
<td></td>
<td></td>
<td><p>6</p></td>
<td><p>15MB</p></td>
<td><p>85 W</p></td>
<td><p>8.0 GT/s</p></td>
<td><p>1600</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2603v3</p></td>
<td></td>
<td></td>
<td><p>6</p></td>
<td><p>15MB</p></td>
<td><p>85 W</p></td>
<td><p>6.4 GT/s</p></td>
<td><p>1600</p></td>
</tr>
<tr class="row-even"><td><p>E5-2699v4</p></td>
<td></td>
<td></td>
<td><p>22</p></td>
<td><p>55MB</p></td>
<td><p>145 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2698v4</p></td>
<td><p>370</p></td>
<td><p>2.2</p></td>
<td><p>20</p></td>
<td><p>50MB</p></td>
<td><p>135 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-even"><td><p>E5-2697v4</p></td>
<td><p>199</p></td>
<td><p>2.3</p></td>
<td><p>18</p></td>
<td><p>45MB</p></td>
<td><p>145 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2697Av4</p></td>
<td></td>
<td></td>
<td><p>16</p></td>
<td><p>40MB</p></td>
<td><p>145 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-even"><td><p>E5-2695v4</p></td>
<td><p>165</p></td>
<td><p>2.1</p></td>
<td><p>18</p></td>
<td><p>45MB</p></td>
<td><p>120 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2690v4</p></td>
<td></td>
<td></td>
<td><p>14</p></td>
<td><p>35MB</p></td>
<td><p>135 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-even"><td><p>E5-2687Wv4</p></td>
<td></td>
<td></td>
<td><p>12</p></td>
<td><p>30MB</p></td>
<td><p>160 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2686v4</p></td>
<td><p>185</p></td>
<td><p>2.3</p></td>
<td><p>18</p></td>
<td><p>45MB</p></td>
<td><p>145 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-even"><td><p>E5-2683v4</p></td>
<td><p>110</p></td>
<td><p>2.1</p></td>
<td><p>16</p></td>
<td><p>40MB</p></td>
<td><p>120 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2682v4</p></td>
<td><p>110</p></td>
<td><p>2.5</p></td>
<td><p>16</p></td>
<td><p>40MB</p></td>
<td><p>120 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-even"><td><p>E5-2680v4</p></td>
<td><p>63</p></td>
<td><p>2.4</p></td>
<td><p>14</p></td>
<td><p>35MB</p></td>
<td><p>120 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2673v4</p></td>
<td><p>245</p></td>
<td><p>2.3</p></td>
<td><p>20</p></td>
<td><p>50MB</p></td>
<td><p>135 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-even"><td><p>E5-2667v4</p></td>
<td><p>135</p></td>
<td><p>3.2</p></td>
<td><p>8</p></td>
<td><p>25MB</p></td>
<td><p>135 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2660v4</p></td>
<td></td>
<td></td>
<td><p>14</p></td>
<td><p>35MB</p></td>
<td><p>105 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-even"><td><p>E5-2650v4</p></td>
<td></td>
<td></td>
<td><p>12</p></td>
<td><p>30MB</p></td>
<td><p>105 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2650Lv4</p></td>
<td></td>
<td></td>
<td><p>14</p></td>
<td><p>35MB</p></td>
<td><p>65 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-even"><td><p>E5-2643v4</p></td>
<td></td>
<td></td>
<td><p>6</p></td>
<td><p>20MB</p></td>
<td><p>135 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2640v4</p></td>
<td></td>
<td></td>
<td><p>10</p></td>
<td><p>25MB</p></td>
<td><p>90 W</p></td>
<td><p>8.0 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-even"><td><p>E5-2637v4</p></td>
<td></td>
<td></td>
<td><p>4</p></td>
<td><p>15MB</p></td>
<td><p>135 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2630v4</p></td>
<td></td>
<td></td>
<td><p>10</p></td>
<td><p>25MB</p></td>
<td><p>85 W</p></td>
<td><p>8.0 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-even"><td><p>E5-2630Lv4</p></td>
<td></td>
<td></td>
<td><p>10</p></td>
<td><p>25MB</p></td>
<td><p>55 W</p></td>
<td><p>8.0 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2623v4</p></td>
<td></td>
<td></td>
<td><p>4</p></td>
<td><p>10MB</p></td>
<td><p>85 W</p></td>
<td><p>8.0 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-even"><td><p>E5-2620v4</p></td>
<td></td>
<td></td>
<td><p>8</p></td>
<td><p>20MB</p></td>
<td><p>85 W</p></td>
<td><p>8.0 GT/s</p></td>
<td><p>2133</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2609v4</p></td>
<td></td>
<td></td>
<td><p>8</p></td>
<td><p>20MB</p></td>
<td><p>85 W</p></td>
<td><p>6.4 GT/s</p></td>
<td><p>1866</p></td>
</tr>
<tr class="row-even"><td><p>E5-2603v4</p></td>
<td></td>
<td></td>
<td><p>6</p></td>
<td><p>15MB</p></td>
<td><p>85 W</p></td>
<td><p>6.4 GT/s</p></td>
<td><p>1866</p></td>
</tr>
<tr class="row-odd"><td><p>E5-2699Av4</p></td>
<td></td>
<td></td>
<td><p>22</p></td>
<td><p>55MB</p></td>
<td><p>145 W</p></td>
<td><p>9.6 GT/s</p></td>
<td><p>2400</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>内存支持和 <a class="reference internal" href="../dell/dell_r640.html#dell-r640"><span class="std std-ref">Dell PowerEdge R640服务器</span></a> 类似，同时支持不同类型(超越了Dell R630)</p>
<ul>
<li><p><a class="reference internal" href="../chipset/dimm_ram.html#lrdimm-ram"><span class="std std-ref">LRDIMM 内存</span></a> 3TB (24 x 128GB LRDIMM &#64; 2400 MHz)</p></li>
<li><p><a class="reference internal" href="../chipset/dimm_ram.html#rdimm-ram"><span class="std std-ref">RDIMM 内存</span></a> 768GB (24 x 32GB RDIMM &#64; 2133 MHz)</p></li>
<li><p><a class="reference internal" href="../chipset/dimm_ram.html#nvdimm-ram"><span class="std std-ref">NVDIMM 内存</span></a> 128GB (16 x 8GB NVDIMM) - 我对比 Intel Optane <a class="reference internal" href="../../../storage/pmem/index.html#linux-pmem"><span class="std std-ref">Linux 持久内存</span></a> 资料，发现这种非易失RAM在特定应用加速上有极大优势， <span class="sphinxnotes-strike" style="text-decoration: line-through;">所以可能还是想实践一下</span></p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>不过从淘宝可以看到 LRDIMM 内存目前非常昂贵，不如 RDIMM内存 性价比高。不过，技术发展迅速，或许未来也可能进入二手市场的高性价比范围。</p>
</div>
</section>
<section id="id7">
<h2>存储<a class="headerlink" href="#id7" title="Link to this heading"></a></h2>
<p>DL360服务器有两种大小规格的磁盘 - 4LFF(3.5&quot;) 和 8SFF(2.5&quot;)/10SFF(2.5&quot;)</p>
<p>我购买的二手DL 360是常见的8FF配置版本，其数据盘位置如下:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/hpe_dl360_gen9_disks.png"><img alt="../../../../_images/hpe_dl360_gen9_disks.png" src="../../../../_images/hpe_dl360_gen9_disks.png" style="width: 867.0px; height: 111.0px;" /></a>
</figure>
<p>可以扩展到10SFF配置(需要另外购置一个 <code class="docutils literal notranslate"><span class="pre">HP</span> <span class="pre">DL360</span> <span class="pre">Gen9</span> <span class="pre">2SFF</span> <span class="pre">SAS/SATA</span> <span class="pre">Universal</span> <span class="pre">Media</span> <span class="pre">Bay</span> <span class="pre">Kit</span> <span class="pre">764630-B21</span></code> (约230-300元) 以安装第9-10磁盘)</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../../../_images/hpe_dl360_gen9_10disks.png"><img alt="../../../../_images/hpe_dl360_gen9_10disks.png" src="../../../../_images/hpe_dl360_gen9_10disks.png" style="width: 861.0px; height: 110.0px;" /></a>
</figure>
<p>10SFF配置有一种性能极致的配置: <code class="docutils literal notranslate"><span class="pre">HP</span> <span class="pre">DL360</span> <span class="pre">Gen9</span> <span class="pre">6</span> <span class="pre">NVMe</span> <span class="pre">+</span> <span class="pre">4</span> <span class="pre">SAS/SATA</span> <span class="pre">Express</span> <span class="pre">Bay</span> <span class="pre">Enablement</span> <span class="pre">Kit</span>&#160; <span class="pre">817676-B21</span></code> 背板替换后，可以支持 4个SAS/SATA 加上 6个NVMe (U.2接口)设备，但是这个配件的价格约在 800 刀到 1000 刀， <span class="sphinxnotes-strike" style="text-decoration: line-through;">并且万能淘宝也找不到，只有海外直购，所以并不现实。 ``实际上也有非官方的解决方案`</span> : <strong>现在淘宝上已经普及了 PCIe 转 U.2 NVMe 扩展卡</strong> :</p>
<ul class="simple">
<li><p>PLX8749/PLX8748免拆分PCIe扩展卡: 可以在服务器内部/外部连接GPU卡和U.2 SSD</p></li>
<li><p>SFF8654转U.2数据线</p></li>
</ul>
<p>使用场景包括通过 <code class="docutils literal notranslate"><span class="pre">双卡槽底座+支架</span></code> 安装2块GPU / 服务器内部通过 <code class="docutils literal notranslate"><span class="pre">SFF8654转U.2数据线</span></code> 连接4块 U.2 SSD存储组建阵列等等...</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>由于 <code class="docutils literal notranslate"><span class="pre">4SAS/SATA</span> <span class="pre">+</span> <span class="pre">6NVMe</span></code> 的扩展模块售价极高，对于二手设备已没有可能。所以如果要通过NVMe存储充分发挥DL 360服务器性能，可行的方法是采用PCIe转M.2 NVMe，实现高性能 <a class="reference internal" href="../../../../ceph/index.html#ceph"><span class="std std-ref">Ceph</span></a> 存储，用于 <a class="reference internal" href="../../../../openstack/index.html#openstack"><span class="std std-ref">OpenStack</span></a> 构建云计算集群。</p>
</div>
<section id="id8">
<h3>存储控制器<a class="headerlink" href="#id8" title="Link to this heading"></a></h3>
<p>主板内置存储控制芯片: HPE Dynamic Smart Array B140i控制器 (对于E5-2600v3 CPU处理器，主板集成的B140i只能工作在UEFI模式)。默认B140i设置为AHCI模式，如果要使用SATA only模式则需要配置激活。</p>
<p>支持2种阵列卡：</p>
<ul class="simple">
<li><p>H240ar 阵列卡，适合少量硬盘，只支持RAID 0和1模式，硬盘也可以设置为无阵列模式</p></li>
<li><p>H440ar 阵列卡，配置2G缓存和电池，支持多硬盘RAID 5,6,10,50,60等模式，硬盘也可以设置为无阵列模式</p></li>
</ul>
<p>HP官方支持网站提供了部件安装视频指南，例如 <a class="reference external" href="https://support.hpe.com/hpesc/public/docDisplay?docId=psg000107aen_us&amp;page=GUID-F16DC03B-D44C-4C4C-B314-BD207D305DF1.html">HP Smpart Array Controller</a> 介绍了如何替换阵列卡。其他组件的安装替换也有相应指导，非常方便</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>现代云计算已经采用 <a class="reference internal" href="../../../../gluster/index.html#gluster"><span class="std std-ref">Gluster</span></a> 和 <a class="reference internal" href="../../../../ceph/index.html#ceph"><span class="std std-ref">Ceph</span></a> 这样的分布式存储来替代早期的RAID存储技术，所以我的不使用硬件RAID设备，没有购买相应的阵列卡。</p>
</div>
</section>
</section>
<section id="id9">
<h2>电源支持<a class="headerlink" href="#id9" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>500W标配</p></li>
<li><p>800W - 考虑到后续将升级添加显卡(耗能大户)以及满配多个存储设备，所以在购买二手DL360时，加价购买了800w电源</p></li>
<li><p>1400W</p></li>
<li><p>750W +</p></li>
</ul>
</section>
<section id="uefi">
<h2>UEFI<a class="headerlink" href="#uefi" title="Link to this heading"></a></h2>
<p>Unified Extensible Firmware Interface (UEFI)是服务器启动管理，HP提供了 <a class="reference external" href="http://www.hpe.com/servers/uefi">HPE UEFI支持</a> :</p>
<ul class="simple">
<li><p>结合UFEI安全启动(通过内建可信任密钥签名)，并且HPE ProLiant Gen10服务器还支持Trusted Platform Module(TPM)</p></li>
<li><p>嵌入的UEFI Sheel 和 <a class="reference external" href="https://www.hpe.com/us/en/servers/restful-api.html">iLo RESTful API</a> ，可以管理UEFI以及BIOS</p></li>
<li><p>UEFI支持PXE从IPv6网络启动，这样可以通过网络快速部署大量服务器</p></li>
</ul>
</section>
<section id="id10">
<h2>我的服务器组合<a class="headerlink" href="#id10" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>HPE ProLiant DL360 Gen9 Server</p></li>
<li><p><a class="reference internal" href="../../../../kernel/cpu/intel/xeon_e5/xeon_e5-2670_v3.html#xeon-e5-2670-v3"><span class="std std-ref">Intel Xeon E5-2670 v3处理器</span></a></p></li>
<li><p>三星 32G DDR4 2R*4 2400MHz 内存 (实际上v3只支持2133MHz，考虑到后续可能升级v4处理器支持2400MHz)</p>
<ul>
<li><p>DL360支持每个DIMM插槽最高32GB RDIMM内存，满配24根最高768GB。为了不浪费插槽和内存，选择2根32G</p></li>
</ul>
</li>
<li><p>硬盘暂时采用原先的购买的笔记本2.5&quot; SSD SATA硬盘，并购置2块2.5&quot; HDD来构建 <a class="reference internal" href="../../../../gluster/index.html#gluster"><span class="std std-ref">Gluster</span></a> 虚拟机</p></li>
<li><p>存储: 采用 <a class="reference internal" href="pcie_bifurcation.html#pcie-bifurcation"><span class="std std-ref">PCIe bifurcation</span></a> 安装3块 <a class="reference internal" href="../../../storage/nvme/nvme.html#nvme"><span class="std std-ref">NVMe存储</span></a> <a class="reference internal" href="../../../storage/nvme/samsung_pm9a1.html#samsung-pm9a1"><span class="std std-ref">三星PM9A1 NVMe存储</span></a> 构建 <a class="reference internal" href="../../../../ceph/index.html#ceph"><span class="std std-ref">Ceph</span></a> ( <a class="reference internal" href="../../../../kvm/iommu/index.html#iommu"><span class="std std-ref">IOMMU</span></a> )</p></li>
<li><p>GPU: 采购 Nvidia GPU卡 实现 <a class="reference internal" href="../../../../kvm/iommu/sr-iov/index.html#sr-iov"><span class="std std-ref">Sigle Root I/O Virtualization(SR-IOV)</span></a> 组建GPU虚拟化集群</p></li>
</ul>
</section>
<section id="id11">
<h2>参考<a class="headerlink" href="#id11" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://support.hpe.com/connect/s/product?language=en_US&amp;ismnp=0&amp;l5oid=7252836&amp;kmpmoid=7252838&amp;cep=on#t=All">HPE ProLiant DL360 Gen9 Server</a></p></li>
<li><p><a class="reference external" href="https://support.hpe.com/hpesc/public/docDisplay?docLocale=en_US&amp;docId=c04346229">HPE ProLiant DL360 Gen9 Server QuickSpecs</a></p></li>
<li><p><a class="reference external" href="https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-c04444424">HPE ProLiant DL360 Gen9 Server - Option Parts</a></p></li>
<li><p><a class="reference external" href="https://support.hpe.com/hpesc/public/docDisplay?docLocale=en_US&amp;docId=c04441974">HPE ProLiant DL360 Gen9 Server User Guide</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="index.html" class="btn btn-neutral float-left" title="HPE服务器" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="hpe_dl380_gen9.html" class="btn btn-neutral float-right" title="HPE ProLiant DL380 Gen9服务器" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../../copyright.html">版权所有</a> 2018 - now, Huatai Huang。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
  
    <!-- your html code here -->
    <br>
    <p><a href="https://github.com/huataihuang/cloud-atlas/issues">留言和讨论</a>|<a href="https://github.com/huataihuang/cloud-atlas/blob/master/source/donate.rst">请我喝一杯咖啡 👈</a></p>
    <br>
    <p>网站采用 <a href="https://utteranc.es/">utterances</a> 评论系统，所有评论存储在<a href="https://github.com/huataihuang/cloud-atlas/issues">GitHub issues</a> 中，如果你看不到下方的评论框，那么可能需要<a href="https://cloud-atlas.readthedocs.io/zh-cn/latest/linux/security/vpn/index.html">自备梯子</a> 👈</p>
    <div class="articleComments">
        <comments>
  <script src="https://utteranc.es/client.js"
    repo="huataihuang/cloud-atlas"
    issue-term="pathname"
    theme="github-light"
    crossorigin="anonymous"
    async>
  </script>
</comments>
    </div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>